# -*- coding: utf-8 -*-
"""
Created on Sat Sep 16 21:41:38 2017

@author: N1705165D
"""

import create_train_test_set as ctts
import train
import test

choices = ["0", "1", "2"]

def print_menu():
    print("======================")
    print("1. Train Model")
    print("2. Test  Model")
    print("0. Exit")
    print("======================")

def print_train_test_set(files_benign, train_benign, test_benign, files_malware, train_malware, test_malware):
    print("=============")
    print("Train Dataset")
    print("=============")
    print("Benign Programs")
    print("---------------")
    count = 1
    for item in train_benign:
        print("%2d. %s" % (count, files_benign[item].split("/")[-1].split(".")[0]))
        count += 1
    print("\nMalware Programs")
    print("----------------")
    count = 1
    for item in train_malware:
        print("%2d. %s" % (count, files_malware[item].split("/")[-1].split(".")[0]))
        count += 1
    print("\n============")
    print("Test Dataset")
    print("============")
    print("Benign Programs")
    print("---------------")
    count = 1
    for item in test_benign:
        print("%2d. %s" % (count, files_benign[item].split("/")[-1].split(".")[0]))
        count += 1
    print("\nMalware Programs")
    print("----------------")
    count = 1
    for item in test_malware:
        print("%2d. %s" % (count, files_malware[item].split("/")[-1].split(".")[0]))
        count += 1
    
def start_training():
    files_benign, train_benign, test_benign, files_malware, train_malware, test_malware = ctts.create()
    with open("base.txt", "w") as f:
        for item in train_benign:
            f.write(files_benign[item] + "\n")
    with open("input.txt", "w") as f:
        for item in train_malware:
            f.write(files_malware[item] + "\n")
    print_train_test_set(files_benign, train_benign, test_benign, files_malware, train_malware, test_malware)
    train.model()

def main():
    con = True
    while con:
        print_menu()
        ch = raw_input("Enter a choice : ")
        if ch == "":
            print("Nothing Entered..")
            continue
        if ch not in choices:
            print("Invalid Choice..!!")
        if ch == "0":
            con = False
        if ch == "1":
            start_training()
        if ch == "2":
            with open("input.txt", "w") as f:
                for item in test_benign:
                    f.write(files_benign[item] + "\n")
                for item in test_malware:
                    f.write(files_malware[item] + "\n")
            test.model()
            
if __name__ == "__main__":
    main()